[{"/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/index.js":"1","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/App.js":"2","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/navbar.js":"3","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/home.js":"4","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/profile.js":"5","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/map.js":"6","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/loading.js":"7","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/components/LogoutButton.js":"8","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/components/LoginButton.js":"9","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/events.js":"10"},{"size":531,"mtime":1685288468736,"results":"11","hashOfConfig":"12"},{"size":1122,"mtime":1685288905257,"results":"13","hashOfConfig":"12"},{"size":940,"mtime":1682821904344,"results":"14","hashOfConfig":"12"},{"size":180,"mtime":1682819620616,"results":"15","hashOfConfig":"12"},{"size":2523,"mtime":1685216102010,"results":"16","hashOfConfig":"12"},{"size":1823,"mtime":1682910396989,"results":"17","hashOfConfig":"12"},{"size":106,"mtime":1682791442482,"results":"18","hashOfConfig":"12"},{"size":312,"mtime":1682741553920,"results":"19","hashOfConfig":"12"},{"size":332,"mtime":1682741553920,"results":"20","hashOfConfig":"12"},{"size":4721,"mtime":1685215056384,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","suppressedMessages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25"},"xp305o",{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29"},{"filePath":"30","messages":"31","suppressedMessages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","suppressedMessages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","suppressedMessages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39"},{"filePath":"40","messages":"41","suppressedMessages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43"},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56"},"/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/index.js",["57"],[],"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Navbar from './navbar';\n\nimport { Auth0Provider } from '@auth0/auth0-react';\n\nconst domain = process.env.REACT_APP_AUTH0_DOMAIN;\nconst clientId = process.env.REACT_APP_AUTH0_CLIENT_ID;\n\n\nReactDOM.render(\n  \n  <Auth0Provider\n    domain={domain}\n    clientId={clientId}\n    redirectUri={window.location.origin}\n  >\n    <React.StrictMode>\n      \n      <App />\n    </React.StrictMode>\n  </Auth0Provider>,\n  document.getElementById('root')\n);\n","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/App.js",["58","59","60"],[],"import React from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport { link } from 'react-router-dom'\nimport { useAuth0 } from '@auth0/auth0-react';\nimport Home from './home';\nimport Events from './events';\nimport Loading from './loading';\nimport Navbar from './navbar';\nimport LoginButton from './components/LoginButton';\nimport LogoutButton from './components/LogoutButton';\nimport Profile from './profile';\nimport Map from './map';\n\nfunction App() {\n  const { isLoading, error, user } = useAuth0();\n  \n\n  return (\n    <>\n      {error && <p>Authentication Error</p>}\n      {!error && isLoading && <p>loading</p>}\n      {!error && !isLoading && (\n        <>\n          <LoginButton />\n          <LogoutButton />\n        </>\n      )}\n      \n      <Router>\n        <Navbar />\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/events\" element={<Events />} />\n          <Route path=\"/profile\" element={<Profile />} />\n          <Route path=\"/map\" element={<Map />} />\n        </Routes>\n        \n      </Router>\n    </>\n  );\n}\n\nexport default App;\n","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/navbar.js",[],[],"/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/home.js",[],[],"/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/profile.js",["61"],[],"import { useAuth0 } from \"@auth0/auth0-react\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport jsPDF from \"jspdf\";\n\nfunction Profile() {\n  const [tableData, setTableData] = useState([]);\n  \n  const { isAuthenticated, user } = useAuth0();\n  const userId = user?.sub;\n\n\n  const { getAccessTokenSilently } = useAuth0();\n  const [token, setToken] = useState(null);\n\n  useEffect(() => {\n    async function fetchToken() {\n      const token = await getAccessTokenSilently();\n      setToken(token);\n    }\n    fetchToken();\n  }, [getAccessTokenSilently]);\n  \n  useEffect(() => {\n    if (!token) return; // Return early if the token is null\n    axios.get(`https://api-g.lgbusiness.net/production/api/v1/events/purchase`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}` // Replace with your actual bearer token\n      },\n      params: {\n        'user_id': userId\n      }\n    })\n      .then(response => setTableData(response.data.instances));\n  }, [token]);\n  \n  function downloadTicket(item) {\n    const pdf = new jsPDF();\n    // Agrega el contenido del ticket al PDF\n    pdf.text('PDF de compra', 10, 10)\n    pdf.text(`ID Compra: ${item._id}`, 10, 20);\n    pdf.text(`Event ID: ${item.eventId}`, 10, 30);\n    pdf.text(`Cantidad: ${item.quantity}`, 10, 40);\n    pdf.text(`Status: ${item.status}`, 10, 50);\n\n    pdf.save(`ticket_${item._id}.pdf`);\n  }\n  \n\n\n  return (\n    <div>\n        \n      {isAuthenticated && (\n        <>\n        <h1>Bienvenido, {user.name}!!</h1>\n        <p>id usuario {userId} </p>\n        <h2>Mis compras</h2>\n        <table>\n            <thead>\n              <tr>\n                <th>ID Compra</th>\n                <th>Event ID</th>\n                <th>Cantidad</th>\n                <th>Status</th>\n                <th>Descargar ticket</th>\n              </tr>\n            </thead>\n            <tbody>\n              {tableData.length > 0 && tableData.map((item) => (\n                <tr key={item._id}>\n                  <td>{item._id}</td>\n                  <td>{item.eventId}</td>\n                  <td>{item.quantity}</td>\n                  <td>{item.status}</td>\n                  <td><button onClick={() => downloadTicket(item)}>Descargar</button></td>\n                </tr>\n              ))}\n            </tbody>\n        </table>\n        </>\n      )} \n\n      {!isAuthenticated && (\n        <h1>Por favor ingresa para ver tus compras</h1>\n      )}\n      \n    </div>\n  );\n\n              }\nexport default Profile;","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/map.js",["62"],[],"import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport \"leaflet/dist/leaflet.css\";\nimport { Icon } from \"leaflet\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nfunction Map() {\n\n  const [data, setData] = useState([]);\n  const [markers, setMarkers] = useState([]);\n\n  \n  const { getAccessTokenSilently } = useAuth0();\n  const [token, setToken] = useState(null);\n  \n  const icon = new Icon({\n    iconUrl: require(\"./img/marker.png\"),\n    iconSize: [25, 25]\n  });\n\n  useEffect(() => {\n    async function fetchToken() {\n      const token = await getAccessTokenSilently();\n      console.log(token)\n      setToken(token);\n    }\n    fetchToken();\n  }, [getAccessTokenSilently]);\n  \n  useEffect(() => {\n    if (!token) return;\n  \n    axios.get('https://api-g.lgbusiness.net/production/api/v1/events', {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `${token}` \n      }\n    })\n    .then(response => {\n      setData(response.data.instances);\n      setMarkers(response.data.instances.map(instance => ({\n        lat: instance.latitude,\n        lng: instance.longitude,\n        name: instance.name\n      })));\n    });\n  }, [token]);\n\nreturn (\n  <>\n  <MapContainer center={[-33.455275555427804\t, -70.6605295633026]} zoom={10} style={{ height: '100vh', width: '100%'}}>\n      <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" \n       attribution='Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors'/>\n      {markers.map(marker => (\n        <Marker key={marker.name} position={[marker.lat, marker.lng]} icon={icon}>\n          <Popup>{marker.name}</Popup>\n        </Marker>\n      ))}\n    </MapContainer>\n  </>\n)\n\n\n\n}\n\nexport default Map;\n\n","/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/loading.js",[],[],"/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/components/LogoutButton.js",[],[],"/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/components/LoginButton.js",[],[],"/Users/eliseolopez/Desktop/repo/e1-2023-1-grupo-9/frontend1/src/events.js",["63","64","65","66","67","68","69"],[],"import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\n\n\nfunction App() {\n  const [data, setData] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const rowsPerPage = 25;\n\n  const { isAuthenticated, user } = useAuth0();\n  const userId = user?.sub;\n\n  const [markers, setMarkers] = useState([]);\n\n  const { getAccessTokenSilently } = useAuth0();\n  const [token, setToken] = useState(null);\n\n  useEffect(() => {\n    async function fetchToken() {\n      const token = await getAccessTokenSilently();\n      console.log(token)\n      setToken(token);\n    }\n    fetchToken();\n  }, [getAccessTokenSilently]);\n  \n  useEffect(() => {\n    if (!token) return;\n  \n    axios.get('https://api-g.lgbusiness.net/production/api/v1/events', {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `${token}` \n      }\n    })\n    .then(response => {\n      setData(response.data.instances);\n      setMarkers(response.data.instances.map(instance => ({\n        lat: instance.latitude,\n        lng: instance.longitude,\n        name: instance.name\n      })));\n    });\n  }, [token]);\n  \n\n  const totalPages = Math.ceil(data.length / rowsPerPage);\n  const startIndex = (currentPage - 1) * rowsPerPage;\n  const endIndex = startIndex + rowsPerPage;\n  const currentRows = data.slice(startIndex, endIndex);\n\n  const handlePageChange = page => {\n    setCurrentPage(page);\n  };\n\n  function handleQuantityChange(event, instance) {\n    const quantity = parseInt(event.target.value);\n    buyInstance(instance, quantity);\n  }\n\n  function buyInstance(instance, q) {\n    \n    fetch('https://api-g.lgbusiness.net/production/api/v1/events/purchase', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        \"groupId\": 9,\n        \"eventId\": instance._id,\n        \"userId\": userId,\n        \"depositToken\": \"asdn12390acsd324\",\n        \"quantity\": q,\n        \"seller\": 0\n      })\n    })\n      .then(response => {\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        return response.json();\n      })\n      .then(data => {\n        console.log('Success:', data);\n      })\n      .catch(error => {\n        console.error('Error:', error);\n      });\n  }\n\n\n  return (\n    <>\n      <table>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Created At</th>\n            <th>Updated At</th>\n            <th>Name</th>\n            <th>Date</th>\n            <th>Price</th>\n            <th>Quantity</th>\n            <th>Location</th>\n            <th>Latitude</th>\n            <th>Longitude</th>\n            <th>Quantity</th>\n            <th>Compra Aqui</th>\n          </tr>\n        </thead>\n        <tbody>\n          {currentRows.map(instance => (\n            <tr key={instance._id}>\n              <td>{instance._id}</td>\n              <td>{instance.createdAt}</td>\n              <td>{instance.updatedAt}</td>\n              <td>{instance.name}</td>\n              <td>{instance.date}</td>\n              <td>{instance.price}</td>\n              <td>{instance.quantity}</td>\n              <td>{instance.location}</td>\n              <td>{instance.latitude}</td>\n              <td>{instance.longitude}</td>\n              <td>\n                <select onChange={(event) => handleQuantityChange(event, instance)}>\n                  <option value=\"0\">0</option>\n                  <option value=\"1\">1</option>\n                  <option value=\"2\">2</option>\n                  <option value=\"3\">3</option>\n                  <option value=\"4\">4</option>\n                  <option value=\"5\">5</option>\n                  <option value=\"6\">6</option>\n                </select>\n              </td>\n              <td>\n                {instance.quantity > 0 && (\n                  <a href=\"#\" onClick={() => buyInstance(instance)}>\n                    Compra ahora\n                  </a>\n                )}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      \n\n\n      <div>\n        <button disabled={currentPage === 1} onClick={() => handlePageChange(currentPage - 1)}>\n          Prev\n        </button>\n        {Array.from({ length: totalPages }).map((_, i) => (\n          <button key={i} onClick={() => handlePageChange(i + 1)}>\n            {i + 1}\n          </button>\n        ))}\n        <button disabled={currentPage === totalPages} onClick={() => handlePageChange(currentPage + 1)}>\n          Next\n        </button>\n      </div>\n\n      \n    </>\n  );\n}\n\nexport default App;\n\n\n",{"ruleId":"70","severity":1,"message":"71","line":4,"column":8,"nodeType":"72","messageId":"73","endLine":4,"endColumn":14},{"ruleId":"70","severity":1,"message":"74","line":3,"column":10,"nodeType":"72","messageId":"73","endLine":3,"endColumn":14},{"ruleId":"70","severity":1,"message":"75","line":7,"column":8,"nodeType":"72","messageId":"73","endLine":7,"endColumn":15},{"ruleId":"70","severity":1,"message":"76","line":15,"column":29,"nodeType":"72","messageId":"73","endLine":15,"endColumn":33},{"ruleId":"77","severity":1,"message":"78","line":36,"column":6,"nodeType":"79","endLine":36,"endColumn":13,"suggestions":"80"},{"ruleId":"70","severity":1,"message":"81","line":10,"column":10,"nodeType":"72","messageId":"73","endLine":10,"endColumn":14},{"ruleId":"70","severity":1,"message":"82","line":4,"column":10,"nodeType":"72","messageId":"73","endLine":4,"endColumn":22},{"ruleId":"70","severity":1,"message":"83","line":4,"column":24,"nodeType":"72","messageId":"73","endLine":4,"endColumn":33},{"ruleId":"70","severity":1,"message":"84","line":4,"column":35,"nodeType":"72","messageId":"73","endLine":4,"endColumn":41},{"ruleId":"70","severity":1,"message":"85","line":4,"column":43,"nodeType":"72","messageId":"73","endLine":4,"endColumn":48},{"ruleId":"70","severity":1,"message":"86","line":12,"column":11,"nodeType":"72","messageId":"73","endLine":12,"endColumn":26},{"ruleId":"70","severity":1,"message":"87","line":15,"column":10,"nodeType":"72","messageId":"73","endLine":15,"endColumn":17},{"ruleId":"88","severity":1,"message":"89","line":140,"column":19,"nodeType":"90","endLine":140,"endColumn":69},"no-unused-vars","'Navbar' is defined but never used.","Identifier","unusedVar","'link' is defined but never used.","'Loading' is defined but never used.","'user' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'userId'. Either include it or remove the dependency array.","ArrayExpression",["91"],"'data' is assigned a value but never used.","'MapContainer' is defined but never used.","'TileLayer' is defined but never used.","'Marker' is defined but never used.","'Popup' is defined but never used.","'isAuthenticated' is assigned a value but never used.","'markers' is assigned a value but never used.","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/anchor-is-valid.md","JSXOpeningElement",{"desc":"92","fix":"93"},"Update the dependencies array to be: [token, userId]",{"range":"94","text":"95"},[1031,1038],"[token, userId]"]